(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{7465:function(e,t,n){Promise.resolve().then(n.t.bind(n,5657,23)),Promise.resolve().then(n.bind(n,3677)),Promise.resolve().then(n.bind(n,6470)),Promise.resolve().then(n.bind(n,2766)),Promise.resolve().then(n.bind(n,893)),Promise.resolve().then(n.bind(n,1034))},893:function(e,t,n){"use strict";n.r(t),n.d(t,{DocumentButton:function(){return DocumentButton}});var o=n(1911),l=n(7994),r=n(3035);function getFetchCookie(){let e=new r.Z.toughCookie.CookieJar,t=(0,r.Z)(fetch,e);return{fetchCookie:t,cookieJar:e}}function getLoginForm(e){let{__VIEWSTATEX:t,__EVENTVALIDATION:n,masterFooterValue:o,username:l,password:r}=e,c=new FormData;return c.append("time","0"),c.append("__EVENTTARGET","m$Content$submitbtn2"),c.append("__EVENTARGUMENT",""),c.append("__LASTFOCUS",""),c.append("__SCROLLPOSITION",""),c.append("__VIEWSTATEX",t),c.append("__VIEWSTATEY_KEY",""),c.append("__VIEWSTATE",""),c.append("__EVENTVALIDATION",n),c.append("m$Content$username",l),c.append("m$Content$password",r),c.append("masterfootervalue",o),c.append("LectioPostbackId",""),c}var c=n(6637);async function downloadAsset(e,t){let{fetchCookie:n}=getFetchCookie(),o=(0,l.$)();async function getLoginText(){return await n("/lectio/".concat(o.schoolCode,"/login.aspx"),{method:"GET",next:{revalidate:0},cache:"no-cache"}).then(async e=>await e.text()).catch(e=>null)}function getForm(e){let t=(0,c.zD)(e),n=t("input#__VIEWSTATEX").val(),l=t("input#__EVENTVALIDATION").val(),r=t('input[name="masterfootervalue"]').val();return n&&l&&r?getLoginForm({__VIEWSTATEX:n,__EVENTVALIDATION:l,masterFooterValue:r,username:o.username||"",password:o.password||""}):null}let r="";if((null===(r=r=await getLoginText())||""===r)&&(r=await getLoginText()),(null===r||""===r)&&(r=await getLoginText()),null===r||""===r)return null;let a=getForm(r);if(null===a)return null;let i=await n("/lectio/".concat(o.schoolCode,"/login.aspx?prevurl=forside.aspx"),{method:"POST",body:a}).then(async e=>{try{let t=await e.text();if(t.includes("Log ind")||t.includes("Der opstod en ukendt fejl"))return null;return!0}catch(e){return null}}).catch(e=>null);if(i){let o=await n(e,{method:"GET"}).then(e=>e.blob()).then(async e=>{try{let n=URL.createObjectURL(e),o=document.createElement("a");return o.href=n,o.target="_blank",o.download=t,o.click(),!0}catch(e){return null}}).catch(e=>null);return o}return null}var a=n(2153),i=n(4032),u=n(2497);function DocumentButton(e){let{strDocument:t,className:n}=e,l=JSON.parse(t),[r,c]=(0,i.useState)(!1);async function downloadAssetWithCheck(){let e=await downloadAsset(l.href,l.name);if(null===e)throw Error("Download failed");return e}async function handleClick(){c(!0);let e=downloadAssetWithCheck();u.toast.promise(e,{loading:"Forbereder download...",success:e=>(c(!1),"Download startet!"),error:"Der skete en fejl"})}return(0,o.jsx)("button",{onClick:handleClick,className:(0,a.cn)("w-max text-left text-blue-400",r?"animate-pulse":"",n),children:l.name})}},1034:function(e,t,n){"use strict";n.r(t),n.d(t,{Separator:function(){return a}});var o=n(1911),l=n(4032),r=n(7700),c=n(2153);let a=l.forwardRef((e,t)=>{let{className:n,orientation:l="horizontal",decorative:a=!0,...i}=e;return(0,o.jsx)(r.f,{ref:t,decorative:a,orientation:l,className:(0,c.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",n),...i})});a.displayName=r.f.displayName},7994:function(e,t,n){"use strict";function getCookies(){var e,t,n,o,l;let r=document.cookie.split("; "),c={username:null===(e=r.find(e=>e.includes("username=")))||void 0===e?void 0:e.replace("username=",""),password:null===(t=r.find(e=>e.includes("password=")))||void 0===t?void 0:t.replace("password=",""),schoolCode:null===(n=r.find(e=>e.includes("schoolCode=")))||void 0===n?void 0:n.replace("schoolCode=",""),lectioCookies:null===(o=r.find(e=>e.includes("lectioCookies=")))||void 0===o?void 0:o.replace("lectioCookies=",""),userId:null===(l=r.find(e=>e.includes("userId=")))||void 0===l?void 0:l.replace("userId=","")};for(let[e,t]of Object.entries(c))if(t){let n=decodeURIComponent(t);c[e]=n}return c}n.d(t,{$:function(){return getCookies}})},2153:function(e,t,n){"use strict";n.d(t,{cn:function(){return cn}});var o=n(3501),l=n(2701);function cn(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,l.m)((0,o.W)(t))}},3677:function(e,t,n){"use strict";n.r(t),t.default={src:"/_next/static/media/Logo.6a758d0b.png",height:151,width:511,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAQAAADPnVVmAAAALElEQVR42mP4p/1P/J/aP6V/Fv9C/8X8i2X4l/Yv9l/+v+B/8f/C/8395wAAWL0UydnptygAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2}},6470:function(e,t,n){"use strict";n.r(t),t.default={src:"/_next/static/media/profile.54ac8029.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAZklEQVR42iXHOw3CABiF0QsDS8WgogJqoSOMTYDwUEBhxgE+IMFJJbCe8ifk3OG7EY3BydGgkbpGnWfpXDVxsdabS191jrtofUsrbjWxcigrMcbWw2QuU9Umlt5mfy+LKPY+ZSfyA+SFXBalV7sbAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},2766:function(e,t,n){"use strict";n.r(t),t.default={src:"/_next/static/media/profileLoading.be03754b.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAe1BMVEVxcXpxcXlwcHlxcXlwcHlwcHlxcXpxcXlwcHlxcXlwcHlxcXlwcHlwcHlxcXpxcXpwcHlwcHlwcHlwcHpwcHpwcHpxcXpxcXpxcXpxcXpwcHlxcXpwcHlxcXlwcHlxcXpxcXlwcHlwcHlwcHlxcXpwcHpwcHlwcHpwcHnYpc7NAAAAJ3RSTlMAAAABAgYLCwsvL0VRYmprc3Z3eHp7fH2LjIyNjY6Yp6fCw8bl5fUSQbT2AAAAR0lEQVR42gVAhxZAIBS9ZUVFZI+MqPf/X+iACzP0RgD5qs5LzQWmUkfS1YgDMgTJdmwsszbjCxr3Eb2uRvoQUbwTcNZ53zL8pDIE5uE1G1EAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}}},function(e){e.O(0,[592,497,305,418,843,509,744],function(){return e(e.s=7465)}),_N_E=e.O()}]);
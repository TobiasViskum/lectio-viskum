(()=>{var e={};e.id=665,e.ids=[665],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},96399:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>c});var n=s(11431),r=s(77499),a=s(79436),l=s.n(a),i=s(42644),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let c=["",{children:["(navbar)",{children:["(sidebar)",{children:["afleveringer",{children:["[ids]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,22879)),"/Users/tobiastv/Desktop/Development/Reactprojects/lectio-viskum/src/app/(navbar)/(sidebar)/afleveringer/[ids]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,63334)),"/Users/tobiastv/Desktop/Development/Reactprojects/lectio-viskum/src/app/(navbar)/(sidebar)/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,34348)),"/Users/tobiastv/Desktop/Development/Reactprojects/lectio-viskum/src/app/(navbar)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35054,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,89113))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,98181)),"/Users/tobiastv/Desktop/Development/Reactprojects/lectio-viskum/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35054,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,89113))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/tobiastv/Desktop/Development/Reactprojects/lectio-viskum/src/app/(navbar)/(sidebar)/afleveringer/[ids]/page.tsx"],m="/(navbar)/(sidebar)/afleveringer/[ids]/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new n.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(navbar)/(sidebar)/afleveringer/[ids]/page",pathname:"/afleveringer/[ids]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},56215:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,92063,23)),Promise.resolve().then(s.bind(s,63371)),Promise.resolve().then(s.bind(s,22290)),Promise.resolve().then(s.bind(s,6060)),Promise.resolve().then(s.bind(s,54023)),Promise.resolve().then(s.bind(s,73544))},54023:(e,t,s)=>{"use strict";s.r(t),s.d(t,{DocumentButton:()=>DocumentButton});var n=s(51516),r=s(88654),a=s(8259);function getFetchCookie(){let e=new a.Z.toughCookie.CookieJar,t=(0,a.Z)(fetch,e);return{fetchCookie:t,cookieJar:e}}function getLoginForm({__VIEWSTATEX:e,__EVENTVALIDATION:t,masterFooterValue:s,username:n,password:r}){let a=new FormData;return a.append("time","0"),a.append("__EVENTTARGET","m$Content$submitbtn2"),a.append("__EVENTARGUMENT",""),a.append("__LASTFOCUS",""),a.append("__SCROLLPOSITION",""),a.append("__VIEWSTATEX",e),a.append("__VIEWSTATEY_KEY",""),a.append("__VIEWSTATE",""),a.append("__EVENTVALIDATION",t),a.append("m$Content$username",n),a.append("m$Content$password",r),a.append("masterfootervalue",s),a.append("LectioPostbackId",""),a}var l=s(18840);async function downloadAsset(e,t){let{fetchCookie:s}=getFetchCookie(),n=(0,r.$)();async function getLoginText(){return await s(`/lectio/${n.schoolCode}/login.aspx`,{method:"GET",next:{revalidate:0},cache:"no-cache"}).then(async e=>await e.text()).catch(e=>null)}function getForm(e){let t=(0,l.zD)(e),s=t("input#__VIEWSTATEX").val(),r=t("input#__EVENTVALIDATION").val(),a=t('input[name="masterfootervalue"]').val();return s&&r&&a?getLoginForm({__VIEWSTATEX:s,__EVENTVALIDATION:r,masterFooterValue:a,username:n.username||"",password:n.password||""}):null}let a="";if((null===(a=a=await getLoginText())||""===a)&&(a=await getLoginText()),(null===a||""===a)&&(a=await getLoginText()),null===a||""===a)return null;let i=getForm(a);if(null===i)return null;let o=await s(`/lectio/${n.schoolCode}/login.aspx?prevurl=forside.aspx`,{method:"POST",body:i}).then(async e=>{try{let t=await e.text();if(t.includes("Log ind")||t.includes("Der opstod en ukendt fejl"))return null;return!0}catch{return null}}).catch(e=>null);if(o){let n=await s(e,{method:"GET"}).then(e=>e.blob()).then(async e=>{try{let s=URL.createObjectURL(e),n=document.createElement("a");return n.href=s,n.target="_blank",n.download=t,n.click(),!0}catch{return null}}).catch(e=>null);return n}return null}var i=s(37798),o=s(77848),c=s(54609);function DocumentButton({strDocument:e,className:t}){let s=JSON.parse(e),[r,a]=(0,o.useState)(!1);async function downloadAssetWithCheck(){let e=await downloadAsset(s.href,s.name);if(null===e)throw Error("Download failed");return e}async function handleClick(){a(!0);let e=downloadAssetWithCheck();c.toast.promise(e,{loading:"Forbereder download...",success:e=>(a(!1),"Download startet!"),error:"Der skete en fejl"})}return n.jsx("button",{onClick:handleClick,className:(0,i.cn)("w-max text-left text-blue-400",r?"animate-pulse":"",t),children:s.name})}},22879:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>AssignmentPage});var n=s(17894),r=s(69429),a=s(34388),l=s(43547),i=s.n(l);async function ClassAndTeacher({assignmentPromise:e}){let t=await e;return null===t?n.jsx("p",{children:"Error"}):(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsxs)("div",{className:"flex gap-x-1",children:[n.jsx("p",{className:"font-bold",children:"Klasse:"}),n.jsx("p",{className:"text-muted-foreground",children:[t.subject,t.class].join(", ")})]}),(0,n.jsxs)("button",{className:"flex w-max items-center gap-x-2 rounded-lg py-2 pl-1 pr-3 transition-colors hover:bg-accent",children:[n.jsx(i(),{src:t.teacher.imgSrc,width:48,height:48,alt:"img",className:"obj aspect-square rounded-full object-cover"}),n.jsx("p",{className:"text-xl font-medium",children:t.teacher.name})]})]})}async function AssignmentDescription({assignmentPromise:e}){let t=await e;if(null===t)return n.jsx("p",{children:"Error"});function urlifyNote(e){return e.replace(/(https?:\/\/[^\s<]+)/g,function(e){let t=e,s=e.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n?]+)/im);return s&&(t=s[1]),`<a class="text-blue-400 font-medium" href=${e} target="_blank" >${t}</a>`})}return 0===t.description.length||1===t.description.length&&""===t.description[0]?null:(0,n.jsxs)("div",{className:"flex max-w-3xl flex-col gap-y-1",children:[n.jsx("p",{className:"font-medium",children:"Opgavebeskrivelse:"}),n.jsx("p",{className:"text-sm text-muted-foreground",dangerouslySetInnerHTML:{__html:urlifyNote(t.description.join("<br/>"))}})]})}var o=s(36736);let c=(0,o.createProxy)(String.raw`/Users/tobiastv/Desktop/Development/Reactprojects/lectio-viskum/src/components/global/DocumentButton.tsx`),{__esModule:d,$$typeof:m}=c;c.default;let u=(0,o.createProxy)(String.raw`/Users/tobiastv/Desktop/Development/Reactprojects/lectio-viskum/src/components/global/DocumentButton.tsx#DocumentButton`);async function AssignmentFiles({assignmentPromise:e}){let t=await e;return null===t?n.jsx("p",{children:"Error"}):0===t.documents.length?null:(0,n.jsxs)("div",{children:[n.jsx("p",{className:"font-medium",children:"Vedh\xe6ftede filer:"}),n.jsx("ul",{className:"flex flex-col gap-y-2",children:t.documents.map((e,t)=>{let s=`${e.href}-${e.name}`;return n.jsx("li",{className:"flex ",children:n.jsx(u,{className:"text-sm",strDocument:JSON.stringify(e)})},s)})})]})}var x=s(3559),p=s(42089);function getDate(e){let t=e.split("-"),s=t[0].split("/"),n=Number(s[0]),r=Number(s[1])-1,a=t[1].split(" "),l=Number(a[0]),i=a[1].split(":"),o=Number(i[0]),c=Number(i[1]);return new Date(l,r,n,o,c)}var h=s(12979),f=s(22008);function SmallScreenSubmit({submit:e,isSubmitterTeacher:t}){let s=getDate(e.time),r=new Intl.DateTimeFormat("da-dk",{dateStyle:"long",timeStyle:"short"}).format(s);return n.jsx(p.Fragment,{children:(0,n.jsxs)("div",{className:"relative grid w-full max-w-xl rounded-md border text-sm",children:[n.jsx("div",{className:"flex items-center rounded-t-sm bg-accent px-2 py-1 text-end ",children:n.jsx("p",{className:"font-semibold",children:r})}),n.jsx(x.Z,{className:"absolute bottom-0 left-[98px] h-[calc(100%-28px)]",orientation:"vertical"}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-1 py-1",children:[(0,n.jsxs)("div",{className:"grid grid-cols-[100px_1fr] px-2",children:[n.jsx("p",{className:"font-semibold",children:"Bruger"}),(0,n.jsxs)("div",{className:(0,h.cn)("flex items-center gap-x-2"),children:[e.submitter,t&&n.jsx(f.Q6s,{className:"text-red-400"})]})]}),n.jsx(x.Z,{}),(0,n.jsxs)("div",{className:"grid grid-cols-[100px_1fr] px-2",children:[n.jsx("p",{className:"font-semibold",children:"Kommentar"}),n.jsx("p",{children:e.comment})]}),n.jsx(x.Z,{}),(0,n.jsxs)("div",{className:"grid grid-cols-[100px_1fr] px-2",children:[n.jsx("p",{className:"font-semibold",children:"Dokument"}),n.jsx(u,{strDocument:JSON.stringify(e.document)})]})]})]})})}function Submit({submit:e,isSubmitterTeacher:t}){return(0,n.jsxs)("div",{children:[n.jsx("div",{className:"block md:hidden",children:n.jsx(SmallScreenSubmit,{submit:e,isSubmitterTeacher:t})}),n.jsx("div",{className:"hidden md:block",children:n.jsx(SmallScreenSubmit,{submit:e,isSubmitterTeacher:t})})]})}async function AssignmentSubmits({assignmentPromise:e}){let t=await e;if(null===t)return n.jsx("p",{children:"Error"});let s=t.submits.filter(e=>e.submitter.toLowerCase()===t.studentName?.toLowerCase()),r=t.submits.filter(e=>e.submitter.toLowerCase()!==t.studentName?.toLowerCase());return(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Feedback:"}),r.map(e=>{let t=JSON.stringify(e.time);return n.jsx(Submit,{submit:e,isSubmitterTeacher:!0},t)})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Elevbesvarelser:"}),s.map(e=>{let t=JSON.stringify(e.time);return n.jsx(Submit,{submit:e,isSubmitterTeacher:!1},t)})]})]})}var g=s(19321);function ClassAndTeacherSkeleton({schoolClass:e,subject:t}){return(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsxs)("div",{className:"flex h-6 w-56 items-center gap-x-1",children:[n.jsx("p",{className:"font-bold",children:"Klasse:"}),e&&t?n.jsx("p",{className:"text-muted-foreground",children:[decodeURIComponent(t),decodeURIComponent(e)].join(", ")}):n.jsx("div",{className:"ml-2 h-3 w-full animate-pulse rounded-md bg-accent"})]}),(0,n.jsxs)("div",{className:"flex w-max animate-pulse items-center gap-x-2 rounded-lg py-2 pl-1 pr-3 transition-colors",children:[n.jsx(i(),{src:g.ZJ,width:48,height:48,alt:"img",className:"obj aspect-square rounded-full object-cover opacity-40"}),n.jsx("div",{className:"h-4 w-40 rounded-md bg-accent font-medium text-accent"})]})]})}async function AssignmentTitle({assignmentPromise:e}){let t=await e;return null===t?n.jsx("p",{children:"Error"}):n.jsx("h1",{className:"text-2xl font-bold md:text-3xl",children:t.title})}function AssignmentTitleSkeleton({title:e}){return n.jsx("div",{children:void 0!==e?n.jsx("h1",{className:"text-2xl font-bold md:text-3xl",children:decodeURIComponent(e)}):n.jsx("div",{className:"h-4 w-[min(90%,400px)] animate-pulse rounded-md bg-accent"})})}function AssignmentDescriptionSkeleton(){return(0,n.jsxs)("div",{className:"flex max-w-[min(85%,768px)] animate-pulse flex-col gap-y-1",children:[n.jsx("div",{className:"flex h-6 w-40 items-center",children:n.jsx("div",{className:"h-4 w-full rounded-md bg-accent"})}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-0.5 text-sm text-muted-foreground",children:[n.jsx("div",{className:"flex h-5 w-full items-center",children:n.jsx("div",{className:"h-3 w-full rounded-md bg-accent"})}),n.jsx("div",{className:"flex h-5 w-full items-center",children:n.jsx("div",{className:"h-3 w-full rounded-md bg-accent"})}),n.jsx("div",{className:"flex h-5 w-full items-center",children:n.jsx("div",{className:"h-3 w-full rounded-md bg-accent"})}),n.jsx("div",{className:"flex h-5 w-1/2 items-center",children:n.jsx("div",{className:"h-3 w-full rounded-md bg-accent"})})]})]})}async function AssignmentInfo({assignmentPromise:e}){let t=await e;if(null===t)return n.jsx("p",{children:"Error"});let s=getDate(t.dueTo),r=new Intl.DateTimeFormat("da-dk",{dateStyle:"long",timeStyle:"short"}).format(s),a=s.getTime()-new Date().getTime()<0;return(0,n.jsxs)("div",{className:"w-96 text-sm",children:[n.jsx(x.Z,{}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-0.5 py-2 pl-2",children:[(0,n.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-x-2",children:[n.jsx("p",{className:"font-bold",children:"Frist:"}),n.jsx("p",{className:"text-muted-foreground",children:r})]}),(0,n.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-x-2",children:[n.jsx("p",{className:"font-bold",children:"Status:"}),n.jsx("p",{className:"text-muted-foreground",children:t.status})]}),(0,n.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-x-2",children:[n.jsx("p",{className:"font-bold",children:"Frav\xe6r:"}),n.jsx("p",{className:"text-muted-foreground",children:a?t.absence:"0%"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-x-2",children:[n.jsx("p",{className:"font-bold",children:"Afventer:"}),n.jsx("p",{className:"text-muted-foreground",children:t.awaiter})]}),(0,n.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-x-2",children:[n.jsx("p",{className:"font-bold",children:"Karakter:"}),n.jsx("p",{className:"text-muted-foreground",children:t.grade||"-"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-x-2",children:[n.jsx("p",{className:"font-bold",children:"Elevnote:"}),n.jsx("p",{className:"text-muted-foreground",children:t.studentNote||"-"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-x-2",children:[n.jsx("p",{className:"font-bold",children:"Karakternote:"}),n.jsx("p",{className:"text-muted-foreground",children:t.gradeNote||"-"})]})]}),n.jsx(x.Z,{})]})}async function AssignmentPage({params:e,searchParams:t}){let s=e.ids,l=(0,r.t)(),i=a.G.getAssignment.byHref({...l,assignmentId:s});return n.jsx(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-6 pt-6",children:[n.jsx(p.Suspense,{fallback:n.jsx(AssignmentTitleSkeleton,{title:t.title}),children:n.jsx(AssignmentTitle,{assignmentPromise:i})}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-6",children:[n.jsx(p.Suspense,{fallback:n.jsx(ClassAndTeacherSkeleton,{schoolClass:t.class,subject:t.subject}),children:n.jsx(ClassAndTeacher,{assignmentPromise:i})}),n.jsx(p.Suspense,{children:n.jsx(AssignmentInfo,{assignmentPromise:i})}),n.jsx(p.Suspense,{fallback:n.jsx(AssignmentDescriptionSkeleton,{}),children:n.jsx(AssignmentDescription,{assignmentPromise:i})}),n.jsx(p.Suspense,{children:n.jsx(AssignmentFiles,{assignmentPromise:i})}),n.jsx(p.Suspense,{children:n.jsx(AssignmentSubmits,{assignmentPromise:i})})]})]})})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[269,775,994,125,826,980,749,40,26,229,356,50,219,445,405,927,354,974],()=>__webpack_exec__(96399));module.exports=s})();
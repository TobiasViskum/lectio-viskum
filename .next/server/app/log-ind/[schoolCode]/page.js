(()=>{var e={};e.id=249,e.ids=[249],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},83058:(e,t,o)=>{"use strict";o.r(t),o.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>f,tree:()=>c});var r=o(11431),s=o(77499),n=o(79436),a=o.n(n),l=o(42644),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);o.d(t,i);let c=["",{children:["log-ind",{children:["[schoolCode]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(o.bind(o,14141)),"/Users/tobiastv/Desktop/Development/Reactprojects/lectio-viskum/src/app/log-ind/[schoolCode]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(o.bind(o,89113))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(o.bind(o,98181)),"/Users/tobiastv/Desktop/Development/Reactprojects/lectio-viskum/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(o.t.bind(o,35054,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(o.bind(o,89113))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/tobiastv/Desktop/Development/Reactprojects/lectio-viskum/src/app/log-ind/[schoolCode]/page.tsx"],u="/log-ind/[schoolCode]/page",p={require:o,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/log-ind/[schoolCode]/page",pathname:"/log-ind/[schoolCode]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},11753:(e,t,o)=>{let r={"051f70d613406ae31624f489f6273673f4a7a051":()=>Promise.resolve().then(o.bind(o,16512)).then(e=>e.handleLogin)};async function endpoint(e,...t){let o=await r[e]();return o.apply(null,t)}e.exports={"051f70d613406ae31624f489f6273673f4a7a051":endpoint.bind(null,"051f70d613406ae31624f489f6273673f4a7a051")}},86865:(e,t,o)=>{Promise.resolve().then(o.bind(o,51132)),Promise.resolve().then(o.bind(o,4196)),Promise.resolve().then(o.bind(o,21498))},51132:(e,t,o)=>{"use strict";o.r(t),o.d(t,{LoginForm:()=>LoginForm});var r=o(51516),s=o(74e3),n=o(78525),a=o(77848);o(9142),o(52499);var l=(0,o(77209).$)("051f70d613406ae31624f489f6273673f4a7a051"),i=o(75381),c=o(54609),d=o(83506),u=o(29179),p=o(65827);function LoginForm(){let e=(0,i.useParams)(),t=(0,i.useRouter)(),[o,f]=(0,a.useState)(!1),[m,g]=(0,a.useState)(!1),h=(0,a.useRef)(null),x=(0,a.useRef)(null),v=(0,a.useRef)(null);async function handleSubmit(){f(!0),await l({username:"",password:"",schoolCode:""}),setTimeout(async()=>{if(h.current&&x.current){let o=h.current.value,r=x.current.value;if(""===o){c.toast.error("Indtast dit brugernavn"),f(!1);return}if(""===r){c.toast.error("Indtast din adgangskode"),f(!1);return}let s=await l({username:o,password:r,schoolCode:e.schoolCode});null===s?c.toast.error("Der skete en fejl"):s.isAuthenticated?((0,d.B)({username:o,password:r,schoolCode:e.schoolCode,lectioCookies:s.lectioCookies,userId:s.studentId}),t.refresh(),c.toast.success("Loggede dig ind!"),setTimeout(()=>{t.push("/forside")},500)):c.toast.error("Elev findes ikke")}else c.toast.error("En uventet fejl skete");f(!1)},500)}return r.jsx(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex w-full flex-col gap-y-6",children:[r.jsx("div",{className:"w-full border-b",children:r.jsx(n.I,{ref:h,spellCheck:!1,className:"rounded-none border-0 placeholder:opacity-50 focus-visible:ring-0",placeholder:"Brugernavn",name:"username",onKeyDown:e=>{"Enter"===e.key&&x.current&&x.current.focus()}})}),(0,r.jsxs)("div",{className:"flex w-full border-b",children:[r.jsx(n.I,{ref:x,spellCheck:!1,className:"rounded-none border-0 placeholder:opacity-50 focus-visible:ring-0",placeholder:"Adgangskode",type:m?"text":"password",name:"password",onKeyDown:e=>{"Enter"===e.key&&v.current&&v.current.click()}}),r.jsx("button",{className:"top-0 grid h-9 w-9 place-items-center p-1.5",onClick:()=>{g(e=>!e)},children:m?r.jsx(u.Z,{className:"h-full w-full",onClick:()=>{g(!1)}}):r.jsx(p.Z,{className:"h-full w-full",onClick:()=>{g(!0)}})})]}),r.jsx(s.z,{loading:o,disabled:o,className:"mt-2 gap-x-2",ref:v,onClick:handleSubmit,children:o?"Logger dig ind...":"Log ind"})]})})}},4196:(e,t,o)=>{"use strict";o.r(t),o.d(t,{Title:()=>Title});var r=o(51516),s=o(77848),n=o(37798);let a=s.forwardRef(({className:e,children:t,...o},s)=>r.jsx(r.Fragment,{children:r.jsx("div",{ref:s,className:(0,n.cn)("relative h-3 w-3 rounded-full bg-zinc-500 text-zinc-500 animate-dot-flashing delay-500",'before:content-[""] before:inline-block before:absolute before:top-0 after:content-[""] after:inline-block after:absolute after:top-0',"before:-left-4 before:h-3 before:w-3 before:rounded-full before:bg-zinc-500 before:text-zinc-500 before:animate-dot-flashing before:delay-0","after:left-4 after:h-3 after:w-3 after:rounded-full after:bg-zinc-500 after:text-zinc-500 after:animate-dot-flashing after:delay-1000",e),...o})}));a.displayName="LoadingDots";var l=o(75381);function TitleSkeleton(){return r.jsx(r.Fragment,{children:r.jsx("div",{className:"flex h-9 items-center text-4xl sm:h-10",children:r.jsx(a,{})})})}function Title({schoolPromise:e,name:t}){let[o,n]=(0,s.useState)(t||null);return(0,l.useRouter)(),r.jsx(r.Fragment,{children:null===o?r.jsx(TitleSkeleton,{}):r.jsx("h1",{className:"sm:text-4xl text-3xl leading-snug font-semibold flex flex-col [text-wrap:balance] text-center",children:o})})}},83506:(e,t,o)=>{"use strict";function setAuthCookies({username:e,password:t,schoolCode:o,lectioCookies:r,userId:s}){let n=new Date;n.setFullYear(n.getFullYear()+1),document.cookie=`username=${e}; expires=`+n.toUTCString()+"; path=/",document.cookie=`password=${t}; expires=`+n.toUTCString()+"; path=/",document.cookie=`schoolCode=${o}; expires=`+n.toUTCString()+"; path=/",document.cookie=`lectioCookies=${encodeURIComponent(r)}; expires=`+n.toUTCString()+"; path=/",document.cookie=`userId=${s}; expires=`+n.toUTCString()+"; path=/"}o.d(t,{B:()=>setAuthCookies})},16512:(e,t,o)=>{"use strict";o.r(t),o.d(t,{handleLogin:()=>handleLogin});var r=o(63501);o(10600);var s=o(62952),n=o(91666);async function handleLogin(e){try{let t=n.default.object({username:n.default.string(),password:n.default.string(),schoolCode:n.default.string()}).parse(e),o=await s.lectioAPI.getIsAuthenticated(t);return o}catch{return null}}(0,o(21158).ensureServerEntryExports)([handleLogin]),(0,r.createActionProxy)("051f70d613406ae31624f489f6273673f4a7a051",null,handleLogin)},14141:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>SchoolCodePage});var r=o(17894),s=o(92020),n=o(36736);let a=(0,n.createProxy)(String.raw`/Users/tobiastv/Desktop/Development/Reactprojects/lectio-viskum/src/app/log-ind/[schoolCode]/_components/Title.tsx`),{__esModule:l,$$typeof:i}=a;a.default;let c=(0,n.createProxy)(String.raw`/Users/tobiastv/Desktop/Development/Reactprojects/lectio-viskum/src/app/log-ind/[schoolCode]/_components/Title.tsx#Title`);var d=o(34388);let u=(0,n.createProxy)(String.raw`/Users/tobiastv/Desktop/Development/Reactprojects/lectio-viskum/src/app/log-ind/[schoolCode]/_components/LoginForm.tsx`),{__esModule:p,$$typeof:f}=u;u.default;let m=(0,n.createProxy)(String.raw`/Users/tobiastv/Desktop/Development/Reactprojects/lectio-viskum/src/app/log-ind/[schoolCode]/_components/LoginForm.tsx#LoginForm`);async function SchoolCodePage({params:e,searchParams:t}){let o=d.G.getSchool({schoolCode:e.schoolCode});return(0,r.jsxs)("div",{className:"grid place-items-center gap-y-8 pt-8 sm:gap-y-12",children:[r.jsx(c,{schoolPromise:o,name:t.name}),(0,r.jsxs)("div",{className:"flex w-full max-w-sm flex-col items-center gap-y-8",children:[r.jsx(s._,{className:"text-muted-foreground",children:"Log ind for at tilg\xe5 Lectio"}),r.jsx(m,{})]})]})}}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),o=t.X(0,[269,775,994,125,980,26,841,33,445,405,354,0,952],()=>__webpack_exec__(83058));module.exports=o})();